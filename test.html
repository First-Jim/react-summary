<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
<script>
  // var arr = [[1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14]]]], 10];

// let newArr = Array.from(new Set(arr.flat(Infinity))).sort((a, b) => a - b);
// console.log("new: ", newArr);

function concatArr(arr1, arr2) {
  let arr = [...arr1]

  let currIndex  = 0
  for(var i=0;i<arr2.length;i++){
    while(currIndex < arr1.length) {
    ++currIndex
    let RE = new RegExp(arr2[i])
    if(!RE.test(arr[currIndex])){
      arr.splice(currIndex,0,arr2[i])
      break;
    }
  }
  }
  
  return arr;
}



var a1 = ["A1", "A2", "B1", "B2", "C1", "C2", "D1", "D2"];
var a2 = ["A", "B", "C", "D"];
const arr = concatArr(a1, a2);
console.log(arr);

// ------------3 =================================
for(var i=0;i<10;i++){

  ((i) => {
    setTimeout(()=>{
      console.log(i)
    },1000)
  })(i)
}

// 4=======
var a = 10;
(function() {
  a = 20
  console.log("a",a)//20
})()
var b = 10;
(function() {
  console.log("b",b)//10
  b = 20
})()

//5 ========
var arr1=[1,2,3,[4,5],[6,[7,[8]]]]
/***使用递归的方式处理*wrap内保存结果ret*返回一个递归函数**@returns*/
function wrap(){
  var ret=[];
  return function flat(a){
    for(var item of a){
      if(item.constructor===Array){
        ret.concat(flat(item))
      }else{
      ret.push(item)
    }
  }
    return ret
  }
}
    console.log(wrap()(arr1))

// 6================================================================
var a = {
  i:1,
  toString(){
    return a.i++;
  }
}
if(a==1&&a==2&&a==3&& a==4){console.log("a:",'条件成立');}

let c=[1,2,3]; c.toString=c.shift
if(c==1 && c==2 && c==3){console.log('c:','条件成立' );}


// 7============sleep
// const sleep=(time)=>{return new Promise(resolve=>setTimeout(resolve,time))}
const sleep = async (fn ,time)=>{
  await setTimeout(() => {
  fn()
  },time)
}
let fnn = function() {
  console.log('hhha')
}
sleep(fnn,3000)
// .then(()=>{
//   console.log('hah')
// })


// 8======冒泡排序
function maopao(arr){
  const array=[...arr] 
  let isOk=true 
  for(let i=0,len=array.length;i<len-1;i++){
    for(let j=i+1;j<len;j++){
      if(array[i]>array[j]){
        let temp=array[i]
        array[i]=array[j] 
        array[j]=temp 
        isOk=false
      }
    }
    if(isOk){
      break;
    }
  }
  return array
}
function bubbleSort(arr) {
  const _arr= [...arr];
  let flag = true
  for(let i=0;i<_arr.length-1;i++) {
    for(let j=i+1;j<_arr.length;j++) {
      if(_arr[j]<_arr[i]){
        let temp = _arr[i];
        _arr[i] = _arr[j]
        _arr[j] = temp
        flag = false
      }
    }
    if(flag) {
      break;
    }
  }
  return _arr
}


console.log('Bubble',bubbleSort([3,32,232,30,4,21]))


// 数组交集
let nums1=[1,2,2,1],nums2=[2,2];
  const ret = nums1.filter((v,i) => 
    nums2.includes(v)
  )
  console.log('ret: ', ret);

  // 树形结构
  let list =[
    {id:1,name:'部门A',parentId:0},
    {id:2,name:'部门B',parentId:0},
    {id:3,name:'部门C',parentId:1},
    {id:4,name:'部门D',parentId:1},
    {id:5,name:'部门E',parentId:2},
    {id:6,name:'部门F',parentId:3},
    {id:7,name:'部门G',parentId:2},
    {id:8,name:'部门H',parentId:4}
];
const result = convert(list)
console.log('result: ', result);

function convert(list) {
	const res = []
	const map = list.reduce((res, v) => (res[v.id] = v, res), {})
  console.log('map: ', map);
// 	for (const item of list) {
// 		if (item.parentId === 0) {
// 			res.push(item)
// 			continue
// 		}
// 		if (item.parentId in map) {
// 			const parent = map[item.parentId]
// 			parent.children = parent.children || []
// 			parent.children.push(item)
// 		}
// 	}
// 	return res
}

// example1
(() => {
  var a={},b='123',c=123;
  a[b]='b';
  a[c]='c';
  console.log(5,a[b]);
}
)()

//example2
// (() => {
//   var a={},b=Symbol('123'),c= Symbol('123');
//   a[b]='b';
//   a[c]='c';
//   console.log(6,a[b]);
// })()
//example3
// (() => {
//   var a={},b={key:'123'},c={key:'456'};
//   a[b]='b';
//   a[c]='c';
//   console.log(7,a[b]);
// })()
</script>
</body>
</html>


